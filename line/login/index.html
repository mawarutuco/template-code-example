<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button onclick="clickBtn()">Line Login</button>

    <script>
      //   POST https://api.line.me/oauth2/v2.1/token
      /**
      {
        "access_token": "bNl4YEFPI/hjFWhTqexp4MuEw5YPs...",
        "expires_in": 2592000,
        "id_token": "eyJhbGciOiJIUzI1NiJ9...",
        "refresh_token": "Aa1FdeggRhTnPNNpxr8p",
        "scope": "profile",
        "token_type": "Bearer"
      }
              */
      const token = "xxxxx";
    //   const url = "https://api.line.me/oauth2/v2.1/token";
        const url = "https://access.line.me/oauth2/v2.1/authorize";

      let headers = {
        "Content-Type": "application/json",
        Accept: "application/json",
        // "Authorization": `Bearer ${token}`,
      };
      //       /**
      //     @desc line 登入流程
      //     created ()
      //     * 一開始判斷是不是 line 登入的 url
      //     submitlint()
      //       1.帶入申請完成的 lineID，要回傳的 url 組合參數傳給 line
      //       2.line 回傳 code & state
      //       3.傳給 Vuex 用 code 在組成 url 打 line，取得 token 給後端
      //     */
      //       //以下是API文件中提及必寫的主體参數。而以下這個產品資料是六角學院提供的。

      //第二階段
      //   let body = {
      //     grant_type: "authorization_code",
      //     code: "",
      //     redirect_uri: "http://127.0.0.1:5502/line/login/index.html",
      //     client_id: "1657783309", //Channel ID
      //     client_secret: "237043880f5192661078c643deafa6b1", //Channel secret
      //   };

      //第一階段
      let body = {
        response_type: "code",
        client_id: "1657783309", //Channel ID
        redirect_uri: "http://127.0.0.1:5502/line/login/index.html",
        state: "199904221234",
        scope: "profile%20openid%20email",
      };
      //第一階段範例
      var c = `https://access.line.me/oauth2/v2.1/authorize?
            response_type=code&
            client_id=1234567890&
            redirect_uri=https%3A%2F%2Fexample.com%2Fauth%3Fkey%3Dvalue&
            state=12345abcde&
            scope=profile%20openid&
            nonce=09876xyz
            `;

      function clickBtn() {
        fetch(url, {
          method: "POST",
          headers: headers,
          body: JSON.stringify(body),
        })
          .then((response) => response.json())
          .then((json) => console.log(json));
      }
    </script>
  </body>
</html>
